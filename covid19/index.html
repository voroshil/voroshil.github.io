<!DOCTYPE html>
<html lang="ru">
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf8">
  <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="main.css">
</head>
<body onLoad="onLoad();">
<h4 align="center">Пандемия COVID-19</h4>
<p>
На основе данных Johns Hopkins University of Medicine
(<a href="https://coronavirus.jhu.edu/map.html">интерактивная карта</a>).
</p>
<p>
Источник предобработанных данных <a href="https://coronavirus.jhu.edu/map.html">
<a href="https://pomber.github.io/covid19/timeseries.json">timeseries.json</a>
(<a href="https://github.com/pomber/covid19">описание</a>)
обновляется ежедневно, приблизительно в полночь по Гринвичу.
</p>

<ul class="nav nav-pills navbar navbar-expand-lg">
  <li class="nav-item">
    <a class="nav-link active" id="graph-tab" data-toggle="tab" href="#graph" role="tab" aria-controls="graph" aria-selected="true">Графики</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="latest-tab" data-toggle="tab" href="#latest" role="tab" aria-controls="latest" aria-selected="false"><span id="latestDate">Последние</span></a>
  </li>
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Таблицы
    </a>
    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
<!--    <li class="nav-item"> -->
      <a class="dropdown-item" id="confirmed-history-tab" data-toggle="tab" href="#confirmed-history" role="tab" aria-controls="confirmed-history" aria-selected="false">Заразившиеся</a>
<!--    </li>
    <li class="nav-item"> -->
      <a class="dropdown-item" id="recovered-history-tab" data-toggle="tab" href="#recovered-history" role="tab" aria-controls="recovered-history" aria-selected="false">Вылечившиеся</a>
<!--    </li>
    <li class="nav-item"> -->
      <a class="dropdown-item" id="death-history-tab" data-toggle="tab" href="#death-history" role="tab" aria-controls="death-history" aria-selected="false">Смерти</a>
<!--    </li>
    <li class="nav-item"> -->
      <a class="dropdown-item" id="active-history-tab" data-toggle="tab" href="#active-history" role="tab" aria-controls="active-history" aria-selected="false">Болеющие</a>
<!--    </li>
    <li class="nav-item"> -->
      <a class="dropdown-item" id="death-rate-history-tab" data-toggle="tab" href="#death-rate-history" role="tab" aria-controls="death-rate-history" aria-selected="false">Летальность, %</a>
<!--    </li>
    <li class="nav-item"> -->
      <a class="dropdown-item" id="something-rate-history-tab" data-toggle="tab" href="#something-rate-history" role="tab" aria-controls="something-rate-history" aria-selected="false">Смертность, %</a>
<!--    </li>
    <li class="nav-item"> -->
      <a class="dropdown-item" id="deaths-estimated-history-tab" data-toggle="tab" href="#deaths-estimated-history" role="tab" aria-controls="deaths-estimated-history" aria-selected="false">Прогноз</a>
<!--    </li> -->
    </div>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="current-tab" data-toggle="tab" href="#current" role="tab" aria-controls="current" aria-selected="false">Текущие</a>
  </li>
</ul>
<div class="tab-content">
  <div class="tab-pane" id="current" role="tabpanel" aria-labelledby="current-tab">
  <h3 align="center">Данные, вводимые вручную</h3>
    <div class="col-sm-4">
      <table class="table table-condensed table-hover" border="1">
        <thead>
        <tr>
          <th>Страна</th>
          <th align="right">Заразившихся</th>
          <th>Выздоровлений</th>
          <th>Смертей</th>
          <th>Болеющих</th>
          <th>Летальность</th>
          <th>Смертность</th>
          <th>Прогноз</th>
          <th>&nbsp;</th>
        </tr>
        </thead>
        <tbody id="currentStat"></tbody>
      </table>
    </div>
  </div>
  <div class="tab-pane" id="latest" role="tabpanel" aria-labelledby="latest-tab">
  <h3 align="center">Последний отчет</h3>
    <div class="col-sm-4">
      <table class="table table-condensed table-hover" border="1">
        <thead>
        <tr>
          <th>Страна</th>
          <th align="right">Заразившихся</th>
          <th>Выздоровлений</th>
          <th>Смертей</th>
          <th>Болеющих</th>
          <th>Летальность</th>
          <th>Смертность</th>
          <th>Прогноз</th>
        </tr>
        </thead>
        <tbody id="latestStat"></tbody>
      </table>
    </div>
  </div>
  <div class="tab-pane" id="confirmed-history" role="tabpanel" aria-labelledby="confirmed-history-tab">
  <h3 align="center">Заразившиеся</h3>
    <table id = "confirmedHistory" class="table table-condensed table-hover" border="1"></table>
  </div> 
  <div class="tab-pane" id="recovered-history" role="tabpanel" aria-labelledby="recovered-history-tab">
  <h3 align="center">Выздоровевшие</h3>
    <table id = "recoveredHistory" class="table table-condensed table-hover"></table>
  </div> 
  <div class="tab-pane" id="death-history" role="tabpanel" aria-labelledby="death-history-tab">
  <h3 align="center">Умершие</h3>
    <table id = "deathHistory" class="table table-condensed table-hover"></table>
  </div> 
  <div class="tab-pane" id="active-history" role="tabpanel" aria-labelledby="active-history-tab">
  <h3 align="center">Болеющие</h3>
    <table id = "activeHistory" class="table table-condensed table-hover"></table>
  </div>
  <div class="tab-pane" id="death-rate-history" role="tabpanel" aria-labelledby="death-rate-history-tab">
  <h3 align="center">Летальность</h3>
    <table id = "deathRateHistory" class="table table-condensed table-hover"></table>
  </div>
  <div class="tab-pane" id="something-rate-history" role="tabpanel" aria-labelledby="something-rate-history-tab">
  <h3 align="center">Смертность</h3>
    <table id = "somethingRateHistory" class="table table-condensed table-hover"></table>
  </div>
  <div class="tab-pane" id="deaths-estimated-history" role="tabpanel" aria-labelledby="deaths-estimated--history-tab">
  <h3 align="center">Прогноз смертей</h3>
    <table id = "deathsEstimatedHistory" class="table table-condensed table-hover"></table>
  </div>
  <div class="tab-pane active" id="graph" role="tabpanel" aria-labelledby="graph-tab">
  <h3 align="center">Графики</h3>
    <div class="col-sm-4">
    <table border="1">
      <thead>
      <tr>
        <th>Страна</th>
        <th>Прирост заразившихся</th>
        <th>Смерти / Выздоровления</th>
<!--        <th>Выздоровления - Смерти</th> -->
        <th>Болеющие</th>
        <th>Летальность</th>
      </tr>
      <tr>
        <td>
          Данные, введенные вручную.<hr/>
          <span style="color:black">Заразившиеся</span>
          <span style="color:orange">Заразившиеся(+/-)</span>
          <span style="color:green">Вылечившиеся(+/-)</span>
          <span style="color:red">Смерти(+/-)</span>
          <span style="color:orange">Болеющие</span>
        </td>
        <td>Ежедневный прирост заразившихся. <br/>Черная линия - центрированное скользящее среднее по 11 точкам. <br/><span style="color:steelblue;">Синим</span> цветом выделена точка максимума скользящего среднего.</td>
        <td>Ежедневнй прирост выздоровевших и умерших. <br/><span style="color:green;">Зеленая</span> и <span style="color:red;">красная</span> линии - центрированное скользящее среднее по 11 точкам</td>
        <td>Количество болеющих. <Br/>Черная линия - центрированное скользящее среднее по 11 точкам. <br/><span style="color:steelblue;">Синим</span> цветом выделена точка максимума скользящего среднего.</td>
        <td>летальность = умерших / (умерших+излечившихся) * 100%<br/><b>Аномально высокие значения в некоторых странах связаны с отсутствием информации об излечившихся.</b><br/> Черная линия - центрированное скользящее среднее по 11 точкам. <br/><span style="color:steelblue;">Синим</span> цветом выделена точка максимума скользящего среднего.</td>
      </tr>
      </thead>
      <tbody id="graphTableBody">
      <tbody>
    </table>
    </div>
  </div>
</div>

<script language="javascript" src="vendor/jquery-3.4.1.min.js"></script>
<script language="javascript" src="vendor/popper.js"></script>
<script language="javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>
<script language="javascript" src="vendor/moment.js"></script>
<script language="javascript" src="vendor/d3.js"></script>

<script language="javascript" src="timeseries.js"></script>
<script language="javascript" src="script.js"></script>
<script id="latestStatTemplate" language="xTemplate">
</script>
</body>
</html>
